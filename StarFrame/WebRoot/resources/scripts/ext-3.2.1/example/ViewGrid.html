<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <meta http-equiv="Cache-Control" content="no-store"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <link rel="stylesheet" type="text/css" href="../resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="../../../styles/icons.css" />
    <script type="text/javascript" src="../ext-base-debug.js"></script>
    <script type="text/javascript" src="../ext-all.js"></script>
    <script type="text/javascript" src="../ext-lang-zh_CN.js"></script>

	<script type="text/javascript" src="../../ux/Ext.ux.JsonReader.js"></script>
	<script type="text/javascript" src="../../ux/Ext.ux.PagePlugins.js"></script>
	<script type="text/javascript" src="../../ux/ST.ux.ViewGrid.js"></script>
	<script type="text/javascript">
		Ext.onReady(function(){
		    //new ST.ux.ViewGrid();
		});
	</script>
  </head>
  <body>
	<script type="text/javascript">
		Ext.onReady(function(){
		//定义数组
		var arr=[ ['Bill', 'Gardener'], [ 'Ben', 'Horticulturalist'],['你', 'Gardener'],['他', 'Gardener'],[ '我', 'Horticulturalist'] ];
		var reader = new Ext.data.ArrayReader({},
			//定义数组到record的映射关系
			[{name: 'name'}, 
			 {name: 'occupation', mapping: 1}]);
		
		//生成元数据
		var store=new Ext.data.Store({reader:reader});
		store.loadData(arr);

		//现在配置列信息 
		var col=new Ext.grid.ColumnModel([
			new Ext.grid.RowNumberer({header:'序号',width:40}),
			{header:'姓名',sortable: true,dataIndex:'name'},
			{header:'职业',sortable: true,dataIndex:'occupation'}]);

		//配置视图信息
		var view=new Ext.grid.GridView({forceFit:true,sortAscText :'正序', sortDescText :'倒序'});
		view.columnsText='列显示/隐藏';

		//现在我们有一个可用的grid了,别骄傲这只是第一步 
		var grid=new Ext.grid.GridPanel({
			el:Ext.getBody(),
			height:200,
			width:400,
			store:store,
			cm:col,
			view:view
		}); 
		
		grid.render();
		
		
		//现在我们需要一个GroupingStore
		var gstore=new Ext.data.GroupingStore({
		reader:reader,
		groupField:'name',
		groupOnSort:true,
		sortInfo:{field: 'occupation', direction: "ASC"} //使用GroupingStore时必须指定sortInfo信息
		});
		gstore.loadData(arr);
		
		
		//扩展一下我们的grid,让他能分组当然会更酷一点 
		var ggrid = new Ext.grid.GridPanel({
		ds: gstore,
		cm:col,
		view: new Ext.grid.GroupingView({
		forceFit:true,
		sortAscText :'正序',
		sortDescText :'倒序',
		columnsText:'列显示/隐藏',
		groupByText:'依本列分组',
		showGroupsText:'分组显示',
		groupTextTpl: '{text} ({[values.rs.length]} 条记录)'
		}),
		frame:true,
		width: 400,
		height: 300,
		collapsible: true,
		animCollapse: false,
		renderTo:Ext.getBody()
		}); 
		
		ggrid.on("rowclick" , function(grid){ 
		var row = ggrid.getSelectionModel().getSelected(); 
		alert(row.get("name")) 
		}); 
		}); 

</script>
  </body>
</html>